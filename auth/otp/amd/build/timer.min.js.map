{"version":3,"file":"timer.min.js","sources":["../src/timer.js"],"sourcesContent":["\n/**\n * Javascript controller for the \"Actions\" panel at the bottom of the page.\n *\n * @module     auth_otp/otp\n * @copyright  2021 Brain station 23 <damyon@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      3.1\n */\ndefine(['jquery', 'core/ajax', 'core/notification'],\n    function ($) {\n    return {\n        setup: function () {\n            $(document).ready(function (){\n                let time = $('#otptimeoutval').val();\n                console.log(time);\n                if (time){\n                    timer(time);\n                }\n            });\n\n            function timer(remaining){\n                let timerOn = true;\n\n                var m = Math.floor(remaining / 60);\n                var s = remaining % 60;\n                m = m < 10 ? '0' + m : m;\n                s = s < 10 ? '0' + s : s;\n                document.getElementById('timer').innerHTML = m + ':' + s;\n                remaining -= 1;\n                if (remaining >= 0 && timerOn) {\n                    setTimeout(function () {\n                        timer(remaining);\n                    }, 1000);\n                    return;\n                }\n                if (!timerOn) {\n                    // Do validate stuff here\n                    return;\n                }\n                // Do timeout stuff here\n                // alert('Timeout for otp');\n                $('#sendotp').removeAttr('disabled');\n                // document.getElementById('timer').innerHTML = 'Resend Code';\n            }\n\n            return true;\n        }\n    };\n});\n"],"names":["define","$","setup","timer","remaining","m","Math","floor","s","document","getElementById","innerHTML","setTimeout","removeAttr","ready","time","val","console","log"],"mappings":";;;;;;;;AASAA,wBAAO,CAAC,SAAU,YAAa,sBAC3B,SAAUC,SACH,CACHC,MAAO,oBASMC,MAAMC,eAGPC,EAAIC,KAAKC,MAAMH,UAAY,IAC3BI,EAAIJ,UAAY,GACpBC,EAAIA,EAAI,GAAK,IAAMA,EAAIA,EACvBG,EAAIA,EAAI,GAAK,IAAMA,EAAIA,EACvBC,SAASC,eAAe,SAASC,UAAYN,EAAI,IAAMG,GACvDJ,WAAa,IACI,EACbQ,YAAW,WACPT,MAAMC,aACP,KASPH,EAAE,YAAYY,WAAW,mBA7B7BZ,EAAEQ,UAAUK,OAAM,eACVC,KAAOd,EAAE,kBAAkBe,MAC/BC,QAAQC,IAAIH,MACRA,MACAZ,MAAMY,UA6BP"}