{"version":3,"file":"card_editing_observer.min.js","sources":["../src/card_editing_observer.js"],"sourcesContent":["/* eslint-disable valid-jsdoc */\ndefine(['jquery', 'core/ajax', 'core/templates', 'core/notification'], function($, Ajax, Templates, Notification) {\n\n    /**\n     * Element SELECTORS list\n     * @type {Object}\n     */\n    var SELECTORS = {\n        GENERAL_ROOT: '.general-section',\n        ACTIVITY: 'li.activity',\n        COURSE_PROGRESS: '.course-prgress-container'\n    };\n\n    /**\n     * Ajax PROMISES\n     * @type {Object}\n     */\n    var PROMISES = {\n        /**\n         * GET_COURSE_PROGRESS promise call\n         * @param {Integer} courseid Course id\n         */\n        GET_COURSE_PROGRESS: function(courseid) {\n            return Ajax.call([{\n                methodname: 'format_vums_course_progress_data',\n                args: {\n                    courseid: courseid\n                }\n            }])[0];\n        }\n    };\n\n    /**\n     * Update course progress when activity duplicated or deleted\n     */\n    function updateCourseProgress() {\n        var container = $(SELECTORS.GENERAL_ROOT + ' ' + SELECTORS.COURSE_PROGRESS);\n        var courseid = container.data('courseid');\n        PROMISES.GET_COURSE_PROGRESS(courseid)\n            .done(function(response) {\n                response.courseid = courseid;\n                // Templates.render('format_vums/course_progress', response)\n                //     .done(function (html, js) {\n                //         Templates.replaceNode(container, html, js);\n                //     })\n                //     .fail(Notification.exception);\n            })\n            .fail(Notification.exception);\n    }\n\n    /**\n     * Initialize js\n     */\n    function init() {\n        $(document).bind('DOMNodeRemoved', function(event) {\n            if ($(event.target).is('li.activity')) {\n                updateCourseProgress();\n            }\n        });\n    }\n\n    // Must return the init function.\n    return {\n        init: init\n    };\n});\n"],"names":["define","$","Ajax","Templates","Notification","SELECTORS","PROMISES","courseid","call","methodname","args","init","document","bind","event","target","is","data","done","response","fail","exception"],"mappings":"AACAA,2CAAO,CAAC,SAAU,YAAa,iBAAkB,sBAAsB,SAASC,EAAGC,KAAMC,UAAWC,kBAM5FC,uBACc,mBADdA,0BAGiB,4BAOjBC,6BAKqB,SAASC,iBACnBL,KAAKM,KAAK,CAAC,CACdC,WAAY,mCACZC,KAAM,CACFH,SAAUA,aAEd,UAkCL,CACHI,gBATAV,EAAEW,UAAUC,KAAK,kBAAkB,SAASC,WAjBxCP,SAkBIN,EAAEa,MAAMC,QAAQC,GAAG,iBAlBvBT,SADYN,EAAEI,uBAAyB,IAAMA,2BACxBY,KAAK,YAC9BX,6BAA6BC,UACxBW,MAAK,SAASC,UACXA,SAASZ,SAAWA,YAOvBa,KAAKhB,aAAaiB"}