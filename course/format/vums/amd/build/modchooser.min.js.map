{"version":3,"file":"modchooser.min.js","sources":["../src/modchooser.js"],"sourcesContent":["define(['jquery', 'core/str', 'core/ajax', 'core/modal_factory', 'core/templates'],\n    function($,str, Ajax, ModalFactory, Templates) {\n    return {\n        init: function(courseId) {\n            window.console.log(\"init modchooser\");\n            // Add a click event listener to the \"Add activity\" button\n            $('body').on('click', '.add-mod', function(e) {\n                e.preventDefault();\n                var sectionId = $(this).data('sectionid'); // Get the section ID from the button\n                var beforemod = $(this).data('beforemod'); // Get the section ID from the button\n                str.get_string('addresourceoractivity').then(function(langString) {\n                    ModalFactory.create({\n                        type: ModalFactory.types.DEFAULT,\n                        title: langString,\n                        body: '<div class=\"modchoosercontainer\"  id=\"activities\">' +\n                            '<div class=\"chooser-container\">' +\n                            '<div class=\"preloader\"></div>' +\n                            '</div></div>',\n                        footer: '',\n                        large: false,\n                        templateContext: {\n                            classes: 'modchooser vums'\n                        }\n                    }).done(function (modal) {\n                        modal.show();\n                        // Make an AJAX request to get the filtered modchooser content\n                        Ajax.call([{\n                            methodname: 'format_vums_get_filtered_modchooser',\n                            args: {\n                                sectionid: sectionId,\n                                courseid: courseId,\n                                beforemod: beforemod,\n                            },\n                            done: function (response) {\n                                Templates.render('format_vums/activitychooser', response).done(function (html) {\n                                    let table = document.querySelector('#activities');\n                                    Templates.replaceNode(table, html);\n                                });\n                            },\n                            fail: function () {\n                                modal.getBody().html('<div>Error loading activities.</div>');\n                            }\n                        }]);\n                    });\n                });\n            });\n        }\n    };\n});\n"],"names":["define","$","str","Ajax","ModalFactory","Templates","init","courseId","window","console","log","on","e","preventDefault","sectionId","this","data","beforemod","get_string","then","langString","create","type","types","DEFAULT","title","body","footer","large","templateContext","classes","done","modal","show","call","methodname","args","sectionid","courseid","response","render","html","table","document","querySelector","replaceNode","fail","getBody"],"mappings":"AAAAA,gCAAO,CAAC,SAAU,WAAY,YAAa,qBAAsB,mBAC7D,SAASC,EAAEC,IAAKC,KAAMC,aAAcC,iBAC7B,CACHC,KAAM,SAASC,UACXC,OAAOC,QAAQC,IAAI,mBAEnBT,EAAE,QAAQU,GAAG,QAAS,YAAY,SAASC,GACvCA,EAAEC,qBACEC,UAAYb,EAAEc,MAAMC,KAAK,aACzBC,UAAYhB,EAAEc,MAAMC,KAAK,aAC7Bd,IAAIgB,WAAW,yBAAyBC,MAAK,SAASC,YAClDhB,aAAaiB,OAAO,CAChBC,KAAMlB,aAAamB,MAAMC,QACzBC,MAAOL,WACPM,KAAM,6HAINC,OAAQ,GACRC,OAAO,EACPC,gBAAiB,CACbC,QAAS,qBAEdC,MAAK,SAAUC,OACdA,MAAMC,OAEN9B,KAAK+B,KAAK,CAAC,CACPC,WAAY,sCACZC,KAAM,CACFC,UAAWvB,UACXwB,SAAU/B,SACVU,UAAWA,WAEfc,KAAM,SAAUQ,UACZlC,UAAUmC,OAAO,8BAA+BD,UAAUR,MAAK,SAAUU,UACjEC,MAAQC,SAASC,cAAc,eACnCvC,UAAUwC,YAAYH,MAAOD,UAGrCK,KAAM,WACFd,MAAMe,UAAUN,KAAK"}