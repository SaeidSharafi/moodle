define("format_vums/modchooser",["jquery","core/str","core/ajax","core/modal_factory","core/templates"],(function($,str,Ajax,ModalFactory,Templates){return{init:function(courseId){window.console.log("init modchooser"),$("body").on("click",".add-mod",(function(e){e.preventDefault();var sectionId=$(this).data("sectionid");str.get_string("addresourceoractivity").then((function(langString){ModalFactory.create({type:ModalFactory.types.DEFAULT,title:langString,body:'<div class="modchoosercontainer"  id="activities"><div class="chooser-container"><div class="preloader"></div></div></div>',footer:"",large:!1,templateContext:{classes:"modchooser vums"}}).done((function(modal){modal.show(),Ajax.call([{methodname:"format_vums_get_filtered_modchooser",args:{sectionid:sectionId,courseid:courseId},done:function(response){Templates.render("format_vums/activitychooser",response).done((function(html){let table=document.querySelector("#activities");Templates.replaceNode(table,html)}))},fail:function(){modal.getBody().html("<div>Error loading activities.</div>")}}])}))}))}))}}}));

//# sourceMappingURL=modchooser.min.js.map